\documentclass{ximera}

\input{../preamble}
\author{Elizabeth Miller}
\license{Creative Commons Attribution-ShareAlike 4.0 International License}
\acknowledgement{https://openstax.org/books/college-algebra/pages/3-4-composition-of-functions}

\title{Domains and Ranges of Composite Functions}

\begin{document}
\begin{abstract}
   We explore the domain and range of a composite function.
\end{abstract}
\maketitle


%\typeout{************************************************}
%\typeout{Motivating Questions}
%\typeout{************************************************}

\begin{motivatingQuestions}
\item How does the process of function composition effect the domain of the function?
\item How does the process of function composition effect the range of the function?
\end{motivatingQuestions}


%\typeout{************************************************}
%\typeout{Subsection Domains of Composite Functions}
%\typeout{************************************************}

\section{Domains of Composite Functions}
The domain of a composite function such as $f \circ g$ is dependent on the domain of $g$ and the domain of $f$. It is important to know when we can apply a composite function and when we cannot, that is, to know the domain of a function such as $f  \circ g$. 

Let us assume we know the domains of the functions $f$ and $g$ separately. If we write the composite function for an input $x$ as $f(g(x))$, we can see right away that $x$ must be a member of the domain of $g$ in order for the expression to be meaningful, because otherwise we cannot complete the inner function evaluation. However, we also see that $g(x)$ must be a member of the domain of $f$, otherwise the second function evaluation in $f(g(x))$ cannot be completed, and the expression is still undefined. Thus the domain of $f \circ g$ consists of only those inputs in the domain of $g$ that produce outputs from $g$ belonging to the domain of $f$. Note that the domain of $f$ composed with $g$ is the set of all $x$ such that $x$ is in the domain of $g$ and $g(x)$ is in the domain of $f$.


\begin{callout}
The domain of a composite function $f(g(x))$ is the set of those inputs $x$ in the domain of $g$ for which $g(x)$ is in the domain of $f$. 
\end{callout}

\begin{image}
\includegraphics{CompDom1}
\end{image}



To find the domain of a composite function, $f\circ g$, you can follow these three steps:
\begin{enumerate}[label=\arabic*)]
\item Find the domain of $g$.
\item Find the domain of $f$.
\item Find those inputs $x$ in the domain of $g$ for which $g(x)$ is in the domain of $f$.  That is, exclude those inputs $x$ from the domain of $g$ for which $g(x)$ is not in the domain of $f$.  The resulting set is the domain of $f \circ g$.  
\end{enumerate} 

\begin{example}
Find the domain of $f \circ g$ where $f(x)=\frac{5}{x-1}$  and $g(x)=\frac{4}{3x-2}$.

\begin{explanation}
The domain of $g$ consists of all real numbers except $x=\frac{2}{3}$, since that input value would cause us to divide by 0. Likewise, the domain of $f$ consists of all real numbers except $1$. We need to exclude from the domain of $g$ any value of $x$ for which $g(x)=1$.


\begin{align*}
\frac{4}{3x-2} &=1\\
4 &=3x-2\\
6 &=3x\\
x &=2
\end{align*}

So the domain of $f \circ g$ is the set of all real numbers except $\frac{2}{3}$ and $2$. This means that

\[
x \neq \frac{2}{3} \text{ or } x \neq 2
\]

We can write this in interval notation as
\[
\left(-\infty,\frac{2}{3}\right) \cup \left(\frac{2}{3},2\right) \cup \left(2,\infty\right)
\]

\end{explanation}
\end{example}




\begin{example}
Find the domain of $f \circ g$ where $f(x)=\sqrt{x+2}$ and $g(x)=\sqrt{3-x}$.

\begin{explanation}

Because we cannot take the square root of a negative number, the domain of $g$ is $(-\infty,3]$. Now we check the domain of the composite function

\[
(f \circ g)(x)=\sqrt{\sqrt{3-x}+2}
\]

For $(f \circ g)(x)=\sqrt{\sqrt{3-x}+2}$, we need $\sqrt{3-x}+2 \geq 0$, since the inside of a square root cannot be negative. Since square roots are non-negative, $\sqrt{3-x} \geq 0$ sp $\sqrt{3-x}+2 \geq 0$ as long as $\sqrt{3-x}$ exists. That means $3-x \geq 0$, which gives a domain of $(- \infty,3]$.

\end{explanation}

\end{example}

This example shows that knowledge of the range of functions (specifically the inner function) can also be helpful in finding the domain of a composite function. It also shows that the domain of $f \circ g$ can contain values that are not in the domain of $f$, though they must be in the domain of $g$.

\begin{exploration}
Find the domain of $f \circ g$ where $f(x)=\frac{1}{x-2}$ and $g(x)=\sqrt{x+4}$.
\end{exploration}




%\typeout{************************************************}
%\typeout{Subsection Ranges of Composite Functions}
%\typeout{************************************************}

\section{Ranges of Composite Functions}
The range of a composite function such as $f \circ g$ is dependent on the range of $g$ and the range of $f$. It is important to know what values can result from a composite function, that is, to know the range of a function such as $f  \circ g$. 

Let us assume we know the ranges of the functions $f$ and $g$ separately. If we write the composite function for an input $x$ as $f(g(x))$, we can see right away that $f(g(x))$ must be a member of the range of $f$ since we will input the value $g(x)$ into $f$. However, we also see that it is possible that not all values in the range of $f$ are in the range of $f(g(x))$.  

\begin{image}
\includegraphics{CompDom1}
\end{image}

From the image above, we can see that there might be values in the yellow region which are in the range of $f$ but for which there are no $x$ values for which $f(g(x))$ gives that output.

\begin{callout}
	The range of a composite function $f\circ g$ is a subset of the range of $f$. 
\end{callout}

To find the domain of a composite function, $f \circ g$, you can follow these three steps:
\begin{enumerate}[label=\arabic*)]
	\item Find the range of $g$.
	\item Find the range of $f$.
	\item Restrict the domain of $f$ to the \emph{range} of $g$ and then determine the outputs of $f$ of these values.  
\end{enumerate} 


\begin{example}
Find the range of $f \circ g$ where $f(x)=\sqrt{x+2}$ and $g(x)=\sqrt{3-x}$.

\begin{explanation}
Because the output of a square root is always a positive number, the range of $g$ is $[0,\infty)$.  Similarly, the range of $f$ is $[0,\infty)$.  But now we must think about what happens when we restrict the input of $f$ to values in the range of $g$, $[0,\infty)$.  If $x \geq 0$, then $x+2 \geq 2$.  Taking the square root of both sides, we see that possible outputs of $f(g(x))$ will be $\sqrt{x+2} \geq \sqrt{2}$.  That is, the range of $f \circ g$ is $[\sqrt{2},\infty)$.

If we look at this function in Desmos, we can confirm graphically that this answer makes sense.  What we want to do is think about collapsing the graph unto the $y$-axis.  The range of the function will be the $y$-values that correspond to a point $(x,y)$ on the curve.  

First, we graph the function using a standard window.
\begin{image}
\includegraphics{composite-range.jpg}
\end{image}

This allows us to see the domain pretty well.  In the previous example, we found the domain to be $(- \infty,3]$ and if we collapse this function to the $x$-axis, it looks like the $x$-values that correspond to points on this curve are exactly the $x$ in $(- \infty,3]$.  If might be difficult to tell the domain from this graph, though.  Let's zoom out some.

\begin{image}
\includegraphics{composite-range-zoomed-out.jpg}
\end{image}

Here is the same graph in Desmos, so you can zoom in and out yourself.
\begin{center}  
\desmos{0wf1e4yyhf}{800}{600}  
\end{center}

You can now see that the blue line is showing this graph collapsed to the $y$-axis.  We can tell that the range will be positive numbers above some value between 1 and 2.  This corresponds with our result above of $[\sqrt{2},\infty)$.  In order to find the exact point $\sqrt{2}$ where the interval begins or to confirm that the interval really goes to infinity, we need to do the reasoning above.

\end{explanation}

\end{example}


\section{Composing $f(x)=x^2$ and $g(x)=\sqrt{x}$}

This final example is going to be a very important one that comes up often so we we will give it its own section.

\begin{example}
Let $f(x)=x^2$ and let $g(x)=\sqrt{x}$.  
\begin{enumerate}[label=\alph*.]
\item Find the domain and range of $f \circ g$ and compare this function to $id(x)=x$ and $abs(x)=|x|$.
\item Find the domain and range of $g \circ f$ and compare this function to $id(x)=x$ and $abs(x)=|x|$.
\end{enumerate}

\begin{explanation}
You probably have the idea that the squaring and squarerooting actions undo one another.  This is true for nonnegative values of $x$, but can get tricky when $x$ is allowed to be negative.  Let's look at each of these situations closely.
\begin{enumerate}[label=\alph*.]
\item First we consider $f \circ g$ and compare this function to $id(x)=x$ and $abs(x)=|x|$.  We have $f(x)=x^2$ and $g(x)=\sqrt{x}$ so 
$$(f \circ g)(x) = f(g(x))=(g(x))^2=(\sqrt{x})^2.$$ 

Let's consider the domain of this function.  Recall that the domain of a composite function $f \circ g$ is the set of those inputs $x$ in the domain of $g$ for which $g(x)$ is in the domain of $f$.  In this case, this means that the domain of $f(g(x))=(\sqrt{x})^2$ is the set of those inputs $x$ in the domain of $g(x)=\sqrt{x}$ for which $\sqrt{x}$ is in the domain of $f(x)=x^2$.  The implied domain of $g(x)=\sqrt{x}$ is $[0,\infty)$ since we cannot take the square root of a negative number.  Therefore, since the domain of the composition has to be only values in the domain of $g(x)$, this means the largest our domain can be is $[0,\infty)$.  Now, the only additional limiting factor is that the values $\sqrt{x}$ must be in the domain of $f$ but since the domain of $f$ is all real numbers, that will not limit the domain of the composition.  Therefore, the domain of $f \circ g$ is  $[0,\infty)$.

Now that we know the domain and we know that squaring and squarerooting undo each other for nonnegative values of $x$, we can conclude that $f \circ g$ is the identity function, $id(x)=x$ but restricted to the domain $[0,\infty)$.  That is,
$$(f \circ g)(x) =  (\sqrt{x})^2 = x, x \geq 0$$

Since the absolute value function is the same as the identity function when $x \geq 0$.  Therefore, we could also say that 
$$(f \circ g)(x) =  (\sqrt{x})^2 = |x|, x \geq 0$$

From this information, we also know that the range of $f \circ g$ will also be $[0,\infty)$, since $(f \circ g)(x) =  (\sqrt{x})^2$.

Here is a graph of $(f \circ g)(x) =  (\sqrt{x})^2$.

\begin{image}
  \begin{tikzpicture}
        \begin{axis}[
                    xmin=-5,xmax=7,
                    ymin=-5,ymax=7,
%                    xtick={2,4,...,14},
%                    minor xtick={1,2,...,15},
%                    ytick={100,200,300},
%                    minor ytick={20,40,...,320},
                    ]
            \addplot+[domain = 0:7,->]{x};
            \addplot[soliddot] coordinates {(0,0)} node[above left]{$(f \circ g)(x) =  (\sqrt{x})^2$};
        \end{axis}
\end{tikzpicture}
\end{image}

\item Now we consider $g \circ f$ and compare this function to $id(x)=x$ and $abs(x)=|x|$.  The domain of $g(f(x))=\sqrt{x^2}$ is the set of those inputs $x$ in the domain of $f(x)=x^2$ for which $x^2$ is in the domain of $g(x)=\sqrt{x}$.  The domain of $f(x)=x^2$ is all real numbers, so this does not reduce the domain of the composite function.  The range of $f(x)=x^2$ is $[0,\infty)$ since the square of every number will be greater than or equal to zero.  The implied domain of $g(x)=\sqrt{x}$ is $[0,\infty)$.  Therefore, every output from $f(x)=x^2$ is in the domain of $f(x)=\sqrt{x}$.  Therefore, the domain of $g \circ f$ is  $(-\infty,\infty)$.

Now, let's consider the range of $g \circ f$.  We know that the range of $g \circ f$ must be contained in the range of $g(x)=\sqrt{x}$.  The range of $g(x)=\sqrt{x}$ is $[0,\infty)$, so that is the largest range possible for $g \circ f$.  We know that for values of $x \geq 0$, squaring and squarerooting undo one another so we know that all the values of $[0,\infty)$ are contained in the range of $g \circ f$.  More precisely, for any value $x_0$ in $[0,\infty)$, $g(f(x_0))=x_0$ so $x_0$ will be in the range of $g \circ f$.  Thus, the range of $g \circ f$ is $[0,\infty)$.

Now, since we know that this function $g \circ f$ only outputs positive numbers, we know it cannot equal the identity function for inputs of $x<0$.  Let's explore what this function does for values of $x<0$ by considering $x=-2$.

$$g(f(-2))=\sqrt{(-2)^2}=\sqrt{4}=2$$

Notice, that we input $x=-2$ but the output was positive 2.  In fact, for all values of $x<0$, $g(f(x))=\sqrt{x^2}=-x=|x|$.

Since the absolute value function is the same as the identity function when $x \geq 0$ but the negative of the idenity function for $x<0$, we have that 
$$(g \circ f)(x) =  \sqrt{x^2} = |x|$$

Here is a graph of $(g \circ f)(x) =  \sqrt{x^2} = |x|$.

\begin{image}
  \begin{tikzpicture}
        \begin{axis}[
                    xmin=-7,xmax=7,
                    ymin=-7,ymax=7,
%                    xtick={2,4,...,14},
%                    minor xtick={1,2,...,15},
%                    ytick={100,200,300},
%                    minor ytick={20,40,...,320},
                    ]
            \addplot+[domain = 0:7,->, color=penColor]{x};
            \addplot+[domain = -7:0,<-, color=penColor]{-x};
            \addplot[soliddot, color=penColor] coordinates {(0,0)};
        \end{axis}
\end{tikzpicture}
\end{image}
\end{enumerate}
\end{explanation}

\end{example}

%\typeout{************************************************}
%\typeout{Summary}
%\typeout{************************************************}

\begin{summary}\begin{itemize}
\item For a composite function $f \circ g$ to be defined, we need outputs of \(g\) to be among the allowed inputs for \(f\).  In particular, if the range of $g$ is a subset of the domain of $f$, we can say that if \(g : A \to B\) and \(f : B \to C\), then \(f \circ g : A \to C\).  In this case, the domain of the composite function is the domain of the inner function, and the range of the composite function is the codomain of the outer function.
\item In general, the domain of a composite function $f \circ g$ is the set of those inputs $x$ in the domain of $g$ for which $g(x)$ is in the domain of $f$. 
\item In general, the range of a composite function $f \circ g$ is a subset of the range of $f$. 
\end{itemize}\end{summary}




\end{document}
